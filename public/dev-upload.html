<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>UnderwriteIQ Dev Upload Test</title>
<style>
  body { font-family: Arial, sans-serif; padding: 40px; background: #111; color: #fff; }
  h1 { font-size: 22px; }
  #zone {
    border: 2px dashed #4CAF50;
    padding: 40px;
    text-align: center;
    cursor: pointer;
    margin-bottom: 20px;
    border-radius: 10px;
  }
  #output {
    white-space: pre-wrap;
    background: #222;
    padding: 20px;
    border-radius: 10px;
    font-size: 14px;
  }
</style>
</head>
<body>

<h1>UnderwriteIQ – Dev Analyzer Test</h1>
<p>Upload a credit report PDF below. This will POST to:<br>
<code>/api/lite/dev-test</code></p>

<div id="zone">Click or Drag PDF Here</div>

<input type="file" id="fileInput" accept="application/pdf" style="display:none">

<pre id="output">Awaiting upload...</pre>

<script>
  const zone = document.getElementById("zone");
  const fileInput = document.getElementById("fileInput");
  const output = document.getElementById("output");

  zone.onclick = () => fileInput.click();

  zone.addEventListener("dragover", e => {
    e.preventDefault();
    zone.style.background = "#1a1a1a";
  });

  zone.addEventListener("dragleave", e => {
    zone.style.background = "transparent";
  });

  zone.addEventListener("drop", e => {
    e.preventDefault();
    zone.style.background = "transparent";
    if (e.dataTransfer.files.length) handleUpload(e.dataTransfer.files[0]);
  });

  fileInput.onchange = () => {
    if (fileInput.files.length) handleUpload(fileInput.files[0]);
  };

  async function handleUpload(file) {
    if (!file) return;

    output.innerText = "Uploading…";

    const formData = new FormData();
    formData.append("file", file);

    const res = await fetch("/api/lite/dev-test", {
      method: "POST",
      body: formData
    });

    const json = await res.json();
    output.innerText = JSON.stringify(json, null, 2);
  }
</script>

</body>
</html>
