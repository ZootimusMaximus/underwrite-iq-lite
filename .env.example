# ==============================================================================
# UnderwriteIQ Lite — Environment Configuration
# ==============================================================================

# ------------------------------------------------------------------------------
# REQUIRED — Core Services
# ------------------------------------------------------------------------------

# OpenAI API Key (for credit report parsing)
UNDERWRITE_IQ_VISION_KEY=sk-proj-...

# Upstash Redis (for caching & deduplication)
UPSTASH_REDIS_REST_URL=https://your-endpoint.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-token-here

# ------------------------------------------------------------------------------
# REQUIRED — GoHighLevel Integration
# ------------------------------------------------------------------------------

# GHL Private API Key (JWT token from API Keys page)
GHL_PRIVATE_API_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# GHL API Base URL
GHL_API_BASE=https://services.leadconnectorhq.com

# GHL Location ID (from URL: app.gohighlevel.com/v2/location/{LOCATION_ID}/...)
GHL_LOCATION_ID=your-location-id-here

# GHL Affiliate Campaign ID (optional - for specific campaign)
# GHL_AFFILIATE_CAMPAIGN_ID=your-campaign-id

# ------------------------------------------------------------------------------
# OPTIONAL — Verification Services
# ------------------------------------------------------------------------------

# Cloudflare Email Validation
CF_EMAIL_VALIDATION_TOKEN=your-token-here

# Twilio SMS Verification
TWILIO_ACCOUNT_SID=your-sid-here
TWILIO_AUTH_TOKEN=your-token-here
TWILIO_PHONE_NUMBER=+1234567890

# OpenCorporates Business Verification
# OPENCORPORATES_API_KEY=your-key-here

# ------------------------------------------------------------------------------
# OPTIONAL — Google Cloud Vision OCR (for scanned PDFs)
# ------------------------------------------------------------------------------

# When PARSE_MODE=auto and text extraction fails (<1000 chars),
# Google Cloud Vision OCR will be used before falling back to GPT-4.1 Vision.
# This is faster (~10-20s) and cheaper (~$0.003-0.005) than Vision (~$0.02-0.05, 30-60s).

# GOOGLE_PROJECT_ID=your-project-id
# GOOGLE_CLIENT_EMAIL=your-service-account@project.iam.gserviceaccount.com
# GOOGLE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\n...\n-----END PRIVATE KEY-----\n"

# ------------------------------------------------------------------------------
# OPTIONAL — Email Service (for verification & post-analysis emails)
# ------------------------------------------------------------------------------

# SendGrid (recommended)
# SENDGRID_API_KEY=your-key-here
# SENDGRID_FROM_EMAIL=noreply@fundhub.ai

# ------------------------------------------------------------------------------
# OPTIONAL — Airtable Integration
# ------------------------------------------------------------------------------

# AIRTABLE_API_KEY=your-key-here
# AIRTABLE_BASE_ID=your-base-id-here

# ------------------------------------------------------------------------------
# REQUIRED — PDF Storage (Vercel Blob)
# ------------------------------------------------------------------------------

# Get this from Vercel Dashboard → Storage → Blob → Connect
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_...

# ------------------------------------------------------------------------------
# OPTIONAL — Redirect URLs (defaults to fundhub.ai)
# ------------------------------------------------------------------------------

REDIRECT_URL_FUNDABLE=https://fundhub.ai/funding-approved-analyzer-462533
REDIRECT_URL_NOT_FUNDABLE=https://fundhub.ai/fix-my-credit-analyzer
REDIRECT_BASE_URL=https://fundhub.ai

# ------------------------------------------------------------------------------
# OPTIONAL — Feature Flags
# ------------------------------------------------------------------------------

AFFILIATE_DASHBOARD_ENABLED=true
IDENTITY_VERIFICATION_ENABLED=true

# ------------------------------------------------------------------------------
# OPTIONAL — Speed Optimizations
# ------------------------------------------------------------------------------

# Skip AI gatekeeper for faster processing (less safe, saves ~3-5 sec)
SKIP_AI_GATEKEEPER=true

# Parse Mode: text (cheap/fast), vision (accurate), auto (text with vision fallback)
# - text: Extract text from PDF, send to GPT-4o-mini (~10-20x cheaper, ~3-4x faster)
# - vision: Send PDF to GPT-4.1 Vision (more accurate for complex layouts)
# - auto: Try text first, fall back to vision if text extraction fails
PARSE_MODE=auto

# Model for text-based parsing (ignored when PARSE_MODE=vision)
# gpt-4o-mini recommended for text mode (fast, cheap, good enough)
PARSE_MODEL=gpt-4o-mini

# ------------------------------------------------------------------------------
# OPTIONAL — Parse Endpoint (defaults to production)
# ------------------------------------------------------------------------------

# PARSE_ENDPOINT=http://localhost:3000/api/lite/parse-report

# ------------------------------------------------------------------------------
# OPTIONAL — Logging & Rate Limiting
# ------------------------------------------------------------------------------

LOG_LEVEL=info  # Options: trace, debug, info, warn, error, fatal

RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=10
RATE_LIMIT_WINDOW=1 m  # e.g., "1 m" = 1 minute, "1 h" = 1 hour
